while True:
    if temp > 45:
        try:
            fan.on()
        except:
            pass
    else:
        try:
            fan.on()
        except:
            pass